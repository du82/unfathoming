<!doctype html>
<html lang="{{ metadata.language }}">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ title or metadata.title }}</title>
		<meta name="description" content="{{ description or metadata.description }}">
		<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="{{ metadata.title }}">
		<link rel="alternate" href="/feed/feed.json" type="application/json" title="{{ metadata.title }}">
		<meta name="generator" content="{{ eleventy.generator }}">
		{%- css %}* { box-sizing: border-box; }{% endcss %}
		{%- css %}{% include "public/css/index.css" %}{% endcss %}
		<style>{% getBundle "css" %}</style>
		<script defer data-domain="unfathom.ing" src="https://plausible.io/js/script.js"></script>
	</head>
	<body>
		<a href="#skip" class="visually-hidden">Skip to main content</a>
		<header>
			<a href="/" class="home-link">{{ metadata.title }}</a>
			<nav>
				<h2 class="visually-hidden">Top level navigation menu</h2>
				<ul class="nav">
				{%- for entry in collections.all | eleventyNavigation %}
					<li class="nav-item"><a href="{{ entry.url }}"{% if entry.url == page.url %} aria-current="page"{% endif %}>{{ entry.title }}</a></li>
				{%- endfor %}
				</ul>
			</nav>
		</header>
		<main id="skip">
			<div class="content-wrapper">
				<div class="main-content">
					{{ content | safe }}
				</div>
				<div class="sidebar">
					<h3>Recent Articles</h3>
					<ul>
						{%- for post in collections.posts | reverse %}
							{% if loop.index <= 5 %}
								<li><a href="{{ post.url }}">{{ post.data.title }}</a></li>
							{% endif %}
						{%- endfor %}
					</ul>
					<h3>Tags</h3>
					<div class="tag-cloud">
						{% for tag in collections.all | getAllTags | filterTagList | sort %}
						{% set tagUrl %}/tags/{{ tag | slugify }}/{% endset %}
							<a href="{{ tagUrl }}" class="post-tag">{{ tag }}</a>
						{% endfor %}
					</div>
				</div>
			</div>
		</main>
		<footer>
			<nav>
				<ul class="footer-nav">
				{%- for entry in collections.all | eleventyNavigation 
				| filter(item => item.footerOrder !== undefined) 
				| sort(false, false, 'footerOrder') %}
				<li class="footer-nav-item">
					<a href="{{ entry.url }}"{% if entry.url == page.url %} aria-current="page"{% endif %}>{{ entry.title }}</a>
				</li>
				{%- endfor %}
				</ul>
			</nav>
		</footer>
		<!-- This page `{{ page.url | htmlBaseUrl }}` was built on {% currentBuildDate %} -->
	</body>
</html>
