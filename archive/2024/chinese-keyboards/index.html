<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Chinese keyboard problem</title>
    <meta name="description" content="A blog about the life experiences, thoughts, and ideas of a computer scientist with a strange life.">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Unfathoming">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Unfathoming">
    <meta name="generator" content="Eleventy v2.0.1">
    <style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
* { box-sizing: border-box; }
body, html {
    margin: 0;
    padding: 0;
    font-family: "Noto Sans", sans-serif;
    line-height: 1.6;
}
header {
    background-color: #f0f0f0;
    padding: 0;
    text-align: left;
    border-top: 1px solid #ccc;
    border-left: 1px solid #ccc;
}
header nav {
    display: flex;
    margin-left: 240px;
    margin-top: 10px;
    border-bottom: 1px solid #ccc;
}
header nav a {
    color: #333;
    text-decoration: none;
    padding: 5px 20px;
    background-color: #e0e0e0;
    border: 1px solid #ccc;
    border-bottom: none;
    border-radius: 0;
    margin-right: 5px;
    position: relative;
    top: 1px;
}
header nav a[aria-current="page"] {
    background-color: #fff;
    border-bottom: 1px solid #fff;
    z-index: 2;
}
.container {
    display: flex;
    min-height: calc(100vh - 41px); /* Subtract header height */
}
.sidebar {
    width: 241px;
    min-width: 241px;
    background-color: #f0f0f0;
    padding: 20px;
    border-left: 1px solid #ccc;
}
.content {
    flex-grow: 1;
    padding: 20px;
    max-width: 40em;
    position: relative;
    border-left: 1px solid #ccc;
}
.content p {
    text-align: justify;
}
h1, h2 {
    color: #333;
border-bottom: 1px solid #ccc
}
.sidebar ul {
    list-style-type: none;
    padding: 0;
}
.sidebar li {
    margin-bottom: 10px;
}
.sidebar a {
    text-decoration: none;
    color: #333;
}
.sidenote {
    font-size: 0.9em;
    color: #666;
    position: absolute;
    right: -220px;
    width: 200px;
    padding-left: 20px;
    box-sizing: border-box;
}
sup {
    color: #0066cc;
    font-weight: bold;
    cursor: help;
}
</style></style>
    <script data-goatcounter="https://unfathoming.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>
<body>
    <header>
        <nav>
            <a href="/">Home</a>
            <a href="/archive/2024/hello-world/">Intro</a>
            <a href="/archive/">Archive</a>
            <a href="/archive/2024/principles/">Principles</a>
            <a href="/archive/2024/about-me/">Me</a>
        </nav>
    </header>
    <div class="container">

        <aside class="sidebar">
            <h1>Recent Posts</h1>
            <ul>
                    
                        <li><a href="/archive/2024/500-topics/">500 Topics worth exploring</a></li>
                    
                    
                        <li><a href="/archive/2024/telegram-analysis/">Telegram&#39;s Design: An In-Depth Analysis</a></li>
                    
                    
                        <li><a href="/archive/2024/principles/">Principles for a free being</a></li>
                    
                    
                        <li><a href="/archive/2024/matrix-data/">Some interesting Matrix data</a></li>
                    
                    
                        <li><a href="/archive/2024/chinese-keyboards/">The Chinese keyboard problem</a></li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
            </ul>
            <h1>Tags</h1>
            <ul>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
                
                    <li><a href=""></a></li>
            </ul>
        </aside>
        <main class="content">
            
<h2 id="the-chinese-keyboard-problem">The Chinese keyboard problem</h2>

<ul class="post-metadata">
	<li><time datetime="2024-07-03">03 July 2024</time></li>
  <li><a href="https://archive.ph/http://unfathom.ing/archive/2024/chinese-keyboards/" target="_blank">View Archived</a><li>
	<li><a href="/tags/privacy/" class="post-tag">privacy</a>, </li>
	<li><a href="/tags/security/" class="post-tag">security</a>, </li>
	<li><a href="/tags/surveillance/" class="post-tag">surveillance</a>, </li>
	<li><a href="/tags/china/" class="post-tag">china</a></li>
</ul>

<p>In the digital age, the keyboards on our phones serve as the primary interface between our thoughts and the online world. For Chinese speakers, this interface comes with a hidden cost. Every known proprietary Chinese input method monitors user behavior, and without reasonably useful open source offerings, users are forced to self-censor to avoid detection.</p>
<p>For those who don't know what makes a Chinese keyboard different from a regular QWERTY keyboard (they use the same layout), most Chinese keyboard software includes a PinYin input method editor that attempts to figure out the best glyph for the latin letters typed.</p>
<p><details class="dropdown">
<summary>How Pinyin input method editors work</summary>
<div class="dropdown-content">
<ol></p>
  <li><strong>Input parsing:</strong> The system breaks down the Pinyin input into syllables.</li>
  <li><strong>Character matching:</strong> For each syllable, the system identifies all possible matching Chinese characters.</li>
  <li><strong>Contextual analysis:</strong> The interpreter examines the surrounding context, including previously entered characters and partial phrases.</li>
  <li><strong>Frequency analysis:</strong> Common words and phrases are given higher priority based on usage statistics.</li>
  <li><strong>User history:</strong> The system considers the user's past choices and typing patterns.</li>
  <li><strong>Predictive modeling:</strong> Machine learning algorithms predict the most likely character or word combinations based on all available data.</li>
  <li><strong>Ranking and display:</strong> The system presents a ranked list of potential character combinations, with the most likely options appearing first.</li>
  <li><strong>Dynamic updating:</strong> As the user continues typing or selects characters, the predictions are continuously refined.</li>
</ol>
        </div>
      </details>
<p>Chinese is a uniquely complex language. There are currently 8105 汉字 (hanzi) which I'll refer to as glyphs for simplicity sake. The ability to turn something like &quot;nihao&quot; into &quot;你好&quot; is surprisingly difficult to implement correctly and effiecently. This has led to a problem where only sufficiently resourced organizations have taken on the task of developing and implementing such algorithms.</p>
<p>The fundamental technology required to communicate effectively on Android devices is gate kept by three large organizations, namely, Alibaba, Tencent, and Huawei. Like every large technology company in the world, these three hand over all data about a user at the request of the government.</p>
<h2 id="one-sided-surveillance">One-sided surveillance <a class="header-anchor" href="#one-sided-surveillance">#</a></h2>
<p><a href="https://citizenlab.ca/2023/08/vulnerabilities-in-sogou-keyboard-encryption/">Every word</a> that is typed or spoken into the keyboards developed by the three companies listed above is transmitted back to those companies for processing<a class="sidenote-anchor" href="#sn1">1</a><span class="sidenote" aria-describedby="sn1"><a class="sidenote-number" id="sn1" href="#sn1">1</a>This is not unique to Chinese apps. Gboard and SwiftKey also do the same thing.</span> by opaque neural networks that look for patterns of potential banned phrases. If that wasn't bad enough, these keyboard apps have also been used to sidestep end-to-end encryption in apps like Signal and Element, allowing authorities to view conversations from one perspective and make life-changing decisions without having the whole story.</p>
<p><em>Who is watching the watchers?</em></p>
<h2 id="self-censorship">Self-censorship <a class="header-anchor" href="#self-censorship">#</a></h2>
<p>This is a very real problem in China<a class="sidenote-anchor" href="#sn2">2</a><span class="sidenote" aria-describedby="sn2"><a class="sidenote-number" id="sn2" href="#sn2">2</a>Also in the West with netizens saying things like unalive instead of kill to keep advertising revenue.</span> which is partially caused by the keyboard. If everything you ever type will be analyzed, and there's no easy open-source alternative, you will most certainly censor yourself to keep the machine happy and stay under the radar.</p>
<h2 id="workarounds">Workarounds <a class="header-anchor" href="#workarounds">#</a></h2>
<p>Currently there's not many workarounds that are viable for long-term use. Trime on Android is the closest option, but the barrier to entry is still much higher than tapping install and having it immediately available. Currently Trime requires you to install LibRime on Linux and extract the dictionary files required to do the automatic suggestions.</p>

<ul class="links-nextprev"><li>Previous: <a href="/archive/2024/embracing-monero/">Embracing Monero as banks betray our privacy</a></li><li>Next: <a href="/archive/2024/matrix-data/">Some interesting Matrix data</a></li>
</ul>

        </main>
    </div>
</body>
<!-- This page `/archive/2024/chinese-keyboards/` was built on 2024-08-24T18:10:45.456Z -->
</html>